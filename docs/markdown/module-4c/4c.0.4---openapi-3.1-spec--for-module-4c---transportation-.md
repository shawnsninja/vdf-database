# 4c.0.4 - OpenAPI 3.1 Spec (for Module 4c - Transportation)

  https://gemini.google.com/u/1/app/b90970622259e225 * * * * * ### 1\. OpenAPI 
3.1 Spec (for Module 4c - Transportation - Corrected) YAML ``` openapi: 3.1.0 
info: title: Via di Francesco - Module 4c: Transportation API (Corrected) 
version: v2.1 description: API endpoints for managing and accessing 
transportation-related data, including stop types, facilities, and detailed 
stop information. Primary language fields (e.g. 'label') contain English text, 
with other languages in a 'translations' object. contact: name: VdF Platform 
Team url: https://example.com/contact # Placeholder email: 
api-support@example.com # Placeholder servers: - url: 
https://api.viadifrancesco.example.com/v1 # Placeholder description: Production 
Server tags: - name: Transport Stop Types description: Management of public 
transport stop type classifications. - name: Transport Stop Facilities 
description: Management of facilities available at transport stops. - name: 
Transport Stops description: Detailed information and management of public 
transport stops (which are Waypoints). components: schemas: # --- Core & 
Utility Schemas (Shared) --- Error: type: object properties: code: type: string 
description: An application-specific error code. example: "validation_failed" 
message: type: string description: A human-readable message providing more 
details about the error. example: "Invalid input for sort_order." detail: type: 
object additionalProperties: true description: Additional details or specific 
field errors. example: sort_order: "must be a positive integer" required: - 
code - message TranslationObject: type: object description: A map of language 
codes to translated strings for a specific field. additionalProperties: type: 
string example: it: "Stazione Ferroviaria Principale" de: "Hauptbahnhof" 
Pagination: type: object properties: page: type: integer description: Current 
page number. example: 1 page_size: type: integer description: Number of items 
per page. example: 20 total_items: type: integer description: Total number of 
items available. example: 42 total_pages: type: integer description: Total 
number of pages. example: 3 required: - page - page_size - total_items - 
total_pages # --- Module 4c: Transportation Schemas (Corrected Translatable 
Fields) --- TransportStopTypeBase: type: object properties: code: type: string 
description: "Short, stable, machine-readable code (snake_case)." example: 
"train_station_main" label: # Corrected: Stores primary language (English) text 
type: string description: "Human-readable name in the primary reference 
language (English)." description: # Corrected: Stores primary language 
(English) text type: string nullable: true description: "Optional description 
in the primary reference language (English)." translations: type: object 
description: "Translations for translatable fields like label and description." 
properties: label: $ref: '#/components/schemas/TranslationObject' description: 
$ref: '#/components/schemas/TranslationObject' icon_identifier: type: string 
nullable: true description: "Name, class, or path for a UI icon." example: 
"icon-train-main" sort_order: type: integer default: 0 description: "Determines 
the display order." is_active: type: boolean default: true description: "If 
true, this type is active and can be used." required: - code - label # Now 
required as it holds English - sort_order - is_active TransportStopType: allOf: 
- $ref: '#/components/schemas/TransportStopTypeBase' - type: object properties: 
id: type: integer format: int32 description: "Unique identifier for the 
transport stop type." readOnly: true created_at: type: string format: date-time 
readOnly: true updated_at: type: string format: date-time readOnly: true 
required: - id - created_at - updated_at TransportStopTypeCreatePayload: # For 
POST type: object properties: code: type: string label: # User submits primary 
language (English) text type: string description: # User submits primary 
language (English) text type: string nullable: true icon_identifier: type: 
string nullable: true sort_order: type: integer default: 0 is_active: # Admin 
might set this explicitly type: boolean default: true required: - code - label 
PaginatedTransportStopTypes: type: object properties: data: type: array items: 
$ref: '#/components/schemas/TransportStopType' pagination: $ref: 
'#/components/schemas/Pagination' required: [data, pagination] 
TransportStopFacilityBase: type: object properties: code: type: string 
description: "Short, stable, machine-readable code." example: 
"toilets_available" label: # Corrected: Stores primary language (English) text 
type: string description: "Human-readable name in the primary reference 
language (English)." description: # Corrected: Stores primary language 
(English) text type: string nullable: true description: "Optional description 
in the primary reference language (English)." translations: type: object 
description: "Translations for translatable fields like label and description." 
properties: label: $ref: '#/components/schemas/TranslationObject' description: 
$ref: '#/components/schemas/TranslationObject' icon_identifier: type: string 
nullable: true example: "icon-toilets" category: type: string nullable: true 
description: "Optional broad category code for grouping." example: 
"basic_needs" sort_order: type: integer default: 0 is_active: type: boolean 
default: true required: - code - label # Now required - sort_order - is_active 
TransportStopFacility: allOf: - $ref: 
'#/components/schemas/TransportStopFacilityBase' - type: object properties: id: 
type: integer format: int32 description: "Unique identifier for the facility." 
readOnly: true created_at: type: string format: date-time readOnly: true 
updated_at: type: string format: date-time readOnly: true required: - id - 
created_at - updated_at TransportStopFacilityCreatePayload: # For POST type: 
object properties: code: type: string label: # User submits primary language 
(English) text type: string description: # User submits primary language 
(English) text type: string nullable: true icon_identifier: type: string 
nullable: true category: type: string nullable: true sort_order: type: integer 
default: 0 is_active: type: boolean default: true required: - code - label 
PaginatedTransportStopFacilities: type: object properties: data: type: array 
items: $ref: '#/components/schemas/TransportStopFacility' pagination: $ref: 
'#/components/schemas/Pagination' required: [data, pagination] FacilityDetail: 
# For the facilities_details array in TransportStopEnriched type: object 
properties: id: type: integer code: type: string label: # Corrected: Primary 
language (English) label type: string description: # Corrected: Primary 
language (English) description type: string nullable: true translations: type: 
object description: "Translations for facility label and description." 
properties: label: $ref: '#/components/schemas/TranslationObject' description: 
$ref: '#/components/schemas/TranslationObject' icon_identifier: type: string 
nullable: true category: type: string nullable: true required: - id - code - 
label # Schema for text fields that are translatable TranslatableText: type: 
object properties: text: # Main field holds English (or primary language) type: 
string nullable: true translations: $ref: 
'#/components/schemas/TranslationObject' required: # text might be nullable, so 
not always required here. # The presence of the TranslatableText object itself 
implies it's a translatable concept. - text # Make English text required if the 
field itself is NOT NULL in DB TransportStopEnriched: # Based on 
view_transport_stops_enriched type: object properties: waypoint_id: type: 
integer format: int64 waypoint_name: # Corrected (was waypoint_name_en) type: 
string description: "Name of the waypoint in the primary reference language 
(English)." translations_waypoint_name: # Translations specifically for 
waypoint_name $ref: '#/components/schemas/TranslationObject' waypoint_geom: 
type: object properties: type: { type: string, enum: [Point] } coordinates: { 
type: array, items: { type: number }, minItems: 2 } 
waypoint_primary_image_media_id: type: string format: uuid nullable: true 
waypoint_content_status_code: type: string example: "published_live" 
stop_type_code: type: string stop_type_label: # Corrected type: string 
description: "Label of the stop type in the primary reference language 
(English)." translations_stop_type_label: $ref: 
'#/components/schemas/TranslationObject' stop_type_description: # Corrected 
type: string nullable: true description: "Description of the stop type in the 
primary reference language (English)." translations_stop_type_description: 
$ref: '#/components/schemas/TranslationObject' stop_type_icon_identifier: type: 
string nullable: true operator_names_text: # This is TEXT[] in DB, primary 
language. type: array # Translations for array elements are complex; API might 
return as is or structure further. items: { type: string } nullable: true 
description: "Array of operator names in the primary reference language 
(English)." operator_stop_code_primary: type: string nullable: true 
gtfs_stop_id: type: string nullable: true lines_or_routes_served_summary: # 
Corrected type: string nullable: true description: "Summary of lines/routes in 
the primary reference language (English)." 
translations_lines_or_routes_served_summary: $ref: 
'#/components/schemas/TranslationObject' specific_timetable_url: type: string 
format: url nullable: true general_operator_info_url: type: string format: url 
nullable: true ticketing_information_notes: # Corrected type: string nullable: 
true description: "Ticketing notes in the primary reference language 
(English)." translations_ticketing_information_notes: $ref: 
'#/components/schemas/TranslationObject' stop_facility_ids: type: array items: 
{ type: integer } nullable: true facilities_details: type: array items: $ref: 
'#/components/schemas/FacilityDetail' # FacilityDetail already models label + 
translations nullable: true platform_track_bay_information_notes: # Corrected 
type: string nullable: true translations_platform_track_bay_information_notes: 
$ref: '#/components/schemas/TranslationObject' 
frequency_of_service_general_notes: # Corrected type: string nullable: true 
translations_frequency_of_service_general_notes: $ref: 
'#/components/schemas/TranslationObject' is_major_interchange_node: type: 
boolean accessibility_notes_transport_stop: # Corrected type: string nullable: 
true translations_accessibility_notes_transport_stop: $ref: 
'#/components/schemas/TranslationObject' bicycle_transport_on_service_notes: # 
Corrected type: string nullable: true 
translations_bicycle_transport_on_service_notes: $ref: 
'#/components/schemas/TranslationObject' notes_for_pilgrims_at_stop: # 
Corrected type: string nullable: true translations_notes_for_pilgrims_at_stop: 
$ref: '#/components/schemas/TranslationObject' data_last_verified_at: type: 
string format: date-time nullable: true details_created_at: type: string 
format: date-time details_updated_at: type: string format: date-time required: 
- waypoint_id - waypoint_name # Was waypoint_name_en # ... other required 
fields based on the view TransportStopDetailsUpdatePayload: # For PATCH 
/transport_stops/{waypoint_id} type: object properties: # User submits primary 
language (English) text for these fields operator_names_text: type: array 
items: { type: string } nullable: true operator_stop_code_primary: type: string 
nullable: true maxLength: 50 gtfs_stop_id: type: string nullable: true 
maxLength: 100 lines_or_routes_served_summary: type: string nullable: true 
specific_timetable_url: type: string format: url nullable: true maxLength: 2048 
general_operator_info_url: type: string format: url nullable: true maxLength: 
2048 ticketing_information_notes: type: string nullable: true 
stop_facility_ids: type: array items: { type: integer } nullable: true 
platform_track_bay_information_notes: type: string nullable: true 
frequency_of_service_general_notes: type: string nullable: true 
is_major_interchange_node: type: boolean accessibility_notes_transport_stop: 
type: string nullable: true bicycle_transport_on_service_notes: type: string 
nullable: true notes_for_pilgrims_at_stop: type: string nullable: true 
data_last_verified_at: type: string format: date-time nullable: true 
PaginatedTransportStopsEnriched: type: object properties: data: type: array 
items: $ref: '#/components/schemas/TransportStopEnriched' pagination: $ref: 
'#/components/schemas/Pagination' required: [data, pagination] securitySchemes: 
bearerAuth: type: http scheme: bearer bearerFormat: JWT description: "Supabase 
JWT token for authenticated requests." parameters: LangQueryParam: name: lang 
in: query description: "BCP47 language code. If provided, the API may attempt 
to return main text fields in this language (if supported by backend logic). 
The 'translations' object will still list other available translations. If 
omitted, main text fields are in the primary reference language (English)." 
required: false schema: type: string example: "it" PageQueryParam: name: page 
in: query description: "Page number for pagination." required: false schema: 
type: integer default: 1 minimum: 1 PageSizeQueryParam: name: page_size in: 
query description: "Number of items per page." required: false schema: type: 
integer default: 20 minimum: 1 maximum: 100 TransportStopTypeIdPathParam: name: 
type_id in: path required: true description: "ID of the transport stop type." 
schema: type: integer TransportStopFacilityIdPathParam: name: facility_id in: 
path required: true description: "ID of the transport stop facility." schema: 
type: integer WaypointIdPathParam: name: waypoint_id in: path required: true 
description: "ID of the waypoint (transport stop)." schema: type: integer 
format: int64 responses: # Standard error responses UnauthorizedError: 
description: Authentication information is missing or invalid. content: 
application/json: { schema: { $ref: '#/components/schemas/Error' } } 
ForbiddenError: description: Authenticated user does not have permission for 
the action. content: application/json: { schema: { $ref: 
'#/components/schemas/Error' } } NotFoundError: description: The requested 
resource was not found. content: application/json: { schema: { $ref: 
'#/components/schemas/Error' } } BadRequestError: description: The request was 
malformed or contained invalid parameters. content: application/json: { schema: 
{ $ref: '#/components/schemas/Error' } } UnprocessableEntityError: description: 
Validation error; request was well-formed but contained semantic errors. 
content: application/json: { schema: { $ref: '#/components/schemas/Error' } } 
TooManyRequestsError: description: Rate limit exceeded. content: 
application/json: { schema: { $ref: '#/components/schemas/Error' } } 
InternalServerError: description: An unexpected error occurred on the server. 
content: application/json: { schema: { $ref: '#/components/schemas/Error' } } 
security: - bearerAuth: [] paths: /transport_stop_types: get: tags: [Transport 
Stop Types] summary: List transport stop types operationId: 
listTransportStopTypes security: [] # Public endpoint parameters: - $ref: 
'#/components/parameters/LangQueryParam' # Though API returns base fields in 
English + translations object - $ref: '#/components/parameters/PageQueryParam' 
- $ref: '#/components/parameters/PageSizeQueryParam' - name: sort_by in: query 
schema: { type: string, enum: [code, label, sort_order], default: sort_order } 
# Was label_en - name: order in: query schema: { type: string, enum: [asc, 
desc], default: asc } responses: '200': description: A paginated list of active 
transport stop types. content: application/json: schema: $ref: 
'#/components/schemas/PaginatedTransportStopTypes' post: tags: [Transport Stop 
Types] summary: Create a new transport stop type (Admin) operationId: 
createTransportStopType security: - bearerAuth: [] # Requires admin role 
requestBody: required: true content: application/json: schema: $ref: 
'#/components/schemas/TransportStopTypeCreatePayload' responses: '201': 
description: Transport stop type created successfully. content: 
application/json: schema: $ref: '#/components/schemas/TransportStopType' '400': 
{ $ref: '#/components/responses/BadRequestError' } '401': { $ref: 
'#/components/responses/UnauthorizedError' } '403': { $ref: 
'#/components/responses/ForbiddenError' } '422': { $ref: 
'#/components/responses/UnprocessableEntityError' } 
/transport_stop_types/{type_id}: get: tags: [Transport Stop Types] summary: Get 
a specific transport stop type by ID operationId: getTransportStopTypeById 
security: [] # Public endpoint parameters: - $ref: 
'#/components/parameters/TransportStopTypeIdPathParam' # LangQueryParam can be 
added if individual field translation is desired by client from translations 
object responses: '200': description: Detailed information about the transport 
stop type. content: application/json: schema: $ref: 
'#/components/schemas/TransportStopType' '404': { $ref: 
'#/components/responses/NotFoundError' } /transport_stop_facilities: get: tags: 
[Transport Stop Facilities] summary: List transport stop facilities 
operationId: listTransportStopFacilities security: [] # Public endpoint 
parameters: - $ref: '#/components/parameters/LangQueryParam' # See note on 
/transport_stop_types - $ref: '#/components/parameters/PageQueryParam' - $ref: 
'#/components/parameters/PageSizeQueryParam' - name: category in: query schema: 
{ type: string } - name: sort_by in: query schema: { type: string, enum: [code, 
label, category, sort_order], default: sort_order } # Was label_en - name: 
order in: query schema: { type: string, enum: [asc, desc], default: asc } 
responses: '200': description: A paginated list of active transport stop 
facilities. content: application/json: schema: $ref: 
'#/components/schemas/PaginatedTransportStopFacilities' post: tags: [Transport 
Stop Facilities] summary: Create a new transport stop facility (Admin) 
operationId: createTransportStopFacility security: - bearerAuth: [] # Requires 
admin role requestBody: required: true content: application/json: schema: $ref: 
'#/components/schemas/TransportStopFacilityCreatePayload' responses: '201': 
description: Transport stop facility created successfully. content: 
application/json: schema: $ref: '#/components/schemas/TransportStopFacility' 
'400': { $ref: '#/components/responses/BadRequestError' } '401': { $ref: 
'#/components/responses/UnauthorizedError' } '403': { $ref: 
'#/components/responses/ForbiddenError' } '422': { $ref: 
'#/components/responses/UnprocessableEntityError' } 
/transport_stop_facilities/{facility_id}: get: tags: [Transport Stop 
Facilities] summary: Get a specific transport stop facility by ID operationId: 
getTransportStopFacilityById security: [] # Public endpoint parameters: - $ref: 
'#/components/parameters/TransportStopFacilityIdPathParam' # LangQueryParam can 
be added responses: '200': description: Detailed information about the 
transport stop facility. content: application/json: schema: $ref: 
'#/components/schemas/TransportStopFacility' '404': { $ref: 
'#/components/responses/NotFoundError' } /transport_stops: get: tags: 
[Transport Stops] summary: List enriched transport stops operationId: 
listTransportStopsEnriched security: [] # Public endpoint, RLS on view handles 
published status parameters: - $ref: '#/components/parameters/LangQueryParam' # 
See note on /transport_stop_types - $ref: 
'#/components/parameters/PageQueryParam' - $ref: 
'#/components/parameters/PageSizeQueryParam' - name: stop_type_code in: query 
schema: { type: string } - name: facilities_include # comma-separated codes of 
facilities in: query schema: { type: string } - name: is_major_interchange in: 
query schema: { type: boolean } - name: near_point # lat,lon in: query schema: 
{ type: string, example: "43.0695,12.6180" } - name: radius # in meters in: 
query schema: { type: integer, minimum: 1 } responses: '200': description: A 
paginated list of enriched transport stops. content: application/json: schema: 
$ref: '#/components/schemas/PaginatedTransportStopsEnriched' # Comment: Relies 
heavily on view_transport_stops_enriched. # Critical: Spatial index on 
waypoints.geom for 'near_point'. # Filtering by 'facilities_include' codes 
needs efficient backend logic. /transport_stops/{waypoint_id}: get: tags: 
[Transport Stops] summary: Get enriched details for a specific transport stop 
operationId: getTransportStopEnrichedById security: [] # Public endpoint, RLS 
on view handles published status parameters: - $ref: 
'#/components/parameters/WaypointIdPathParam' # LangQueryParam can be added 
responses: '200': description: Detailed enriched information about the 
transport stop. content: application/json: schema: $ref: 
'#/components/schemas/TransportStopEnriched' '404': { $ref: 
'#/components/responses/NotFoundError' } patch: tags: [Transport Stops] 
summary: Update specific details of a transport stop (Admin/Manager) 
operationId: updateTransportStopDetails security: - bearerAuth: [] # Requires 
specific role parameters: - $ref: '#/components/parameters/WaypointIdPathParam' 
requestBody: required: true content: application/json: schema: $ref: 
'#/components/schemas/TransportStopDetailsUpdatePayload' # User submits primary 
lang text for updatable fields responses: '200': description: Transport stop 
details updated successfully. Returns the updated enriched transport stop. 
content: application/json: schema: $ref: 
'#/components/schemas/TransportStopEnriched' '400': { $ref: 
'#/components/responses/BadRequestError' } '401': { $ref: 
'#/components/responses/UnauthorizedError' } '403': { $ref: 
'#/components/responses/ForbiddenError' } '404': { $ref: 
'#/components/responses/NotFoundError' } '422': { $ref: 
'#/components/responses/UnprocessableEntityError' } # Comment: Backend needs to 
handle potential updates to public.translations if primary lang text changes. 
``` * * * * * ### 2\. Quick-Start Examples 1. List active transport stop types 
(Public), primary lang + translations object Bash ``` curl -X GET 
"https://api.viadifrancesco.example.com/v1/transport_stop_types?page_size=1"\ 
-H "Accept: application/json" ``` Sample Response: JSON ``` { "data": [ { "id": 
10, "code": "train_station_main", "label": "Main Train Station", // English 
from DB "description": "Primary railway station with comprehensive services.", 
// English from DB "translations": { "label": { "it": "Stazione Ferroviaria 
Principale", "de": "Hauptbahnhof" }, "description": { "it": "Stazione 
ferroviaria principale con servizi completi.", "de": "Hauptbahnhof mit 
umfassenden Dienstleistungen." } }, "icon_identifier": "icon-train-main", 
"sort_order": 10, "is_active": true, "created_at": "2023-01-15T10:00:00Z", 
"updated_at": "2023-01-16T11:00:00Z" } ], "pagination": { "page": 1, 
"page_size": 1, "total_items": 17, "total_pages": 17 } } ``` 2. Get enriched 
details for a specific transport stop (Public) Bash ``` curl -X GET 
"https://api.viadifrancesco.example.com/v1/transport_stops/101"\ -H "Accept: 
application/json" ``` Sample Response: JSON ``` { "waypoint_id": 101, 
"waypoint_name": "Assisi Station", // English "translations_waypoint_name": { 
"it": "Stazione di Assisi" }, "waypoint_geom": { "type": "Point", 
"coordinates": [12.6189, 43.0592] }, "stop_type_code": "train_station_main", 
"stop_type_label": "Main Train Station", // English 
"translations_stop_type_label": { "it": "Stazione Ferroviaria Principale" }, 
"facilities_details": [ { "id": 1, "code": "toilets_available", "label": 
"Toilets Available", // English "translations": { "label": { "it": "Servizi 
Igienici Disponibili" } } /* ... */ } ] // ... other fields from 
TransportStopEnriched } ``` 3. Create a new transport stop facility (Admin) 
Bash ``` curl -X POST 
"https://api.viadifrancesco.example.com/v1/transport_stop_facilities"\ -H 
"Authorization: Bearer <YOUR_ADMIN_JWT_TOKEN>"\ -H "Content-Type: 
application/json"\ -d '{ "code": "bicycle_repair_station", "label": "Bicycle 
Repair Station", "description": "Station with basic tools for bicycle repair.", 
"icon_identifier": "icon-bicycle-repair", "category": "services", "sort_order": 
155, "is_active": true }' ``` Sample Response (201 Created): JSON ``` { "id": 
99, // New ID "code": "bicycle_repair_station", "label": "Bicycle Repair 
Station", // English "description": "Station with basic tools for bicycle 
repair.", // English "translations": { "label": {}, // Initially empty, to be 
populated via translation workflow "description": {} }, "icon_identifier": 
"icon-bicycle-repair", "category": "services", "sort_order": 155, "is_active": 
true, "created_at": "2025-05-18T19:30:00Z", "updated_at": 
"2025-05-18T19:30:00Z" } ``` * * * * * ### 3\. Implementation Notes - üü¢ Schema 
OK for Module 4c Tables: The database table specifications for 
`transport_stop_types_master`, `transport_stop_facilities_master`, and 
`transport_stops_details` (V2.1) are consistent with this API model (i.e., 
primary language text in columns like `label`, with other translations in 
`public.translations`). No further schema tweaks to these tables are mandated 
by this specific API structure. - ‚ú® View 
`public.view_transport_stops_enriched`: - This view remains highly recommended 
for the `GET /transport_stops` and `GET /transport_stops/{waypoint_id}` 
endpoints. Its DDL should select primary language fields directly (e.g., 
`w.name AS waypoint_name`, `tstm.label AS stop_type_label`). - The API backend 
will query this view for the primary language content and then separately query 
`public.translations` to construct the `translations` objects for the API 
response. - üîë Translation Handling by API Backend (Crucial): - The API backend 
is responsible for constructing the specified JSON output where main fields 
(e.g., `label`) contain the primary reference language (English) text, and the 
nested `translations` object contains key-value pairs for other languages. - 
This involves fetching the base record (which contains English) and then 
performing lookups in `public.translations` for all relevant translatable 
fields of that record for all supported/requested other languages. - When 
creating/updating (e.g., `POST /transport_stop_types`), the payload will 
contain the primary language text (e.g., in `label`). The backend saves this to 
the main table column. Separate processes/endpoints would manage 
adding/updating entries in the `public.translations` table. - üó∫Ô∏è Critical 
External Dependency: Spatial Index on `waypoints.geom`: - üî¥ For `GET 
/transport_stops` to support `near_point` or `bbox` geographic queries 
efficiently, a spatial index (e.g., GIST) on `public.waypoints.geom` is 
CRITICAL. This should be ensured in the `waypoints` table specification. - üîó 
Filtering by `facilities_include` (codes): - The API backend will need to: 1. 
Map the provided facility `codes` to their `id`s from 
`transport_stop_facilities_master`. 2. Filter `transport_stops_details` using 
its `stop_facility_ids` array column with the GIN index (e.g., `WHERE 
stop_facility_ids @> ARRAY[id1, id2]`). - üõ°Ô∏è Authorization & RLS: - WRITE 
endpoints must be protected by `bearerAuth` and appropriate RLS policies on the 
backend tables, checking user roles (`admin_platform`, 
`regional_content_manager` as appropriate). - READ endpoints for master data 
(`/transport_stop_types`, `/transport_stop_facilities`) will rely on RLS on the 
master tables to filter by `is_active=true` for public requests. - READ 
endpoints for `/transport_stops` will rely on RLS on 
`view_transport_stops_enriched` (and its underlying tables) to filter by 
`waypoint_content_status_code = 'published_live'` for public requests. - ‚öôÔ∏è 
`LangQueryParam` Behavior: - The `LangQueryParam` is available. While the 
primary text fields in the response (e.g., `label`) will default to English 
(primary reference language), a sophisticated API *could* use the `lang` param 
to directly populate these fields with the requested language if a translation 
exists, moving the English to the `translations.en` field or omitting it from 
the main field if a translation is found. However, the simpler model for now 
is: main field = English, `translations` object = others. The client then uses 
`lang` to select. For clarity, I've described the `LangQueryParam` in a way 
that allows the API to use it as a hint, but the base schema returns English + 
translations object. 
